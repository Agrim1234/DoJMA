package com.csatimes.dojma;import android.content.Context;import android.content.Intent;import android.content.SharedPreferences;import android.database.Cursor;import android.os.Bundle;import android.os.Environment;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.ListView;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.ArrayList;import java.util.Date;import java.util.List;public class Herald extends Fragment {    //This is the website that we will be parsing.    public static String address = "http://csatimes.co.in/dojma";    public static String ROOT_DIRECTORY = Environment.getExternalStorageDirectory().toString();    public static String dojmaFolderName = "dojmaImages";    ListView heraldListView;    boolean isItFirstTime = false;    Cursor cr;    DatabaseOperations dop;    CustomHeraldAdapter adapter;    SharedPreferences preferences;    SharedPreferences.Editor editor;    private List<HeraldItemObject> itemsList = new ArrayList<>();    public Herald() {        // Required empty public constructor    }    @Override    public void onPause() {        super.onPause();        editor.apply();    }    @Override    public void onStop() {        super.onStop();        editor.putBoolean("AppStarted", false);        editor.apply();    }    @Override    public void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        Log.e("TAG", "OnCreate called");        preferences = getActivity().getApplicationContext().getSharedPreferences(HomeActivity.USER_PREFERENCES,                Context.MODE_PRIVATE);        editor = preferences.edit();//        if (isItFirstTime) {        {          //download            Log.e("TAG", "FirstTimeForonCreate");            editor.putBoolean("IsItFirstTime", false);            editor.apply();            Log.e("TAG", "Oncreate was called once");            //download new only            //and show old ones in database        }        // req? editor.apply();        //dateDiff("2", "1");    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container,                             Bundle savedInstanceState) {        Log.e("TAG", "onCreateView Called");        View V = inflater.inflate(R.layout.fragment_herald, container, false);        adapter = new CustomHeraldAdapter(getContext(), itemsList);        heraldListView = (ListView) V.findViewById(R.id.herald_list_view);        heraldListView.setAdapter(adapter);        //Handle click events on items        //will be replaced by an in app viewer        heraldListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                {                    Intent openWebpage = new Intent(getActivity(), OpenWebpage.class);                    openWebpage.putExtra("URL",                            itemsList.get                                    (position).url);                    openWebpage.putExtra("TITLE", itemsList.get(position).title);                    startActivity(openWebpage);                }            }        });        return V;    }    private void dateDiff(String dateNew, String old) {        String dateStr = "2016-01-21";        SimpleDateFormat curFormater = new SimpleDateFormat("yyyy-MM-dd");        Date dateObj = null;        try {            dateObj = curFormater.parse(dateStr);            SimpleDateFormat postFormater = new SimpleDateFormat("yyyyMMdd");            String newDateStr = postFormater.format(dateObj);            Log.e("TAG", newDateStr);        } catch (ParseException e) {            e.printStackTrace();        }    }    //Class of type Herald News    public class HeraldItemObject {        String postID;        String title;        String url;        String author;        String date;        String imageURL;        //Constructor for the news item        public HeraldItemObject(String postID, String title, String url, String author, String date,                                String imageURL) {            this.postID = postID;            this.title = title;            this.url = url;            this.author = author;            this.date = date;            this.imageURL = imageURL;        }    }}